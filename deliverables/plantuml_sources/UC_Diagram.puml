@startuml name UCdiagram
title Pickup & Delivery Bike Tours - Use Case Diagram
left to right direction
skinparam linetype ortho
skinparam usecase {
    BackgroundColor<<core>> #EEF7FF
    BorderColor #2B6CB0
}

actor Dispatcher
actor Courier

rectangle "Tour Planning System" as System {

    usecase UC_Load         as "Load and display City Map (XML)" <<core>>
    usecase UC_Receive      as "Load Delivery Request (XML)" <<core>>
    usecase UC_Compute      as "Compute Best Tour" <<core>>

    usecase UC_SetCouriers  as "Set Number of Couriers"

    usecase UC_SelectCourier as "Select Courier"
    usecase UC_Pickup_Delivery as "Select Pickup and Delivery Location"
    usecase UC_ServiceTimes as "Set Service Times"

    usecase UC_DisplayTour  as "Display Tour on Map"

    usecase UC_Save         as "Save Current Tours to File"
    usecase UC_Restore      as "Restore Tours from File"

    usecase UC_addDeliveryManual as "Add a delivery request manually" <<core>>

    ' --- Layout constraints: EXACT two HORIZONTAL ROWS (6 top, 5 bottom) ---
    ' Top row (left -> right):
    '   UC_Load, UC_Receive, UC_Compute, UC_addDeliveryManual, UC_DisplayTour, UC_Save
    UC_Load -[hidden]right- UC_Receive
    UC_Receive -[hidden]right- UC_Compute
    UC_Compute -[hidden]right- UC_addDeliveryManual
    UC_addDeliveryManual -[hidden]right- UC_DisplayTour
    UC_DisplayTour -[hidden]right- UC_Save

    ' Bottom row (left -> right):
    '   UC_SetCouriers, UC_SelectCourier, UC_Pickup_Delivery, UC_ServiceTimes, UC_Restore
    UC_SetCouriers -[hidden]right- UC_SelectCourier
    UC_SelectCourier -[hidden]right- UC_Pickup_Delivery
    UC_Pickup_Delivery -[hidden]right- UC_ServiceTimes
    UC_ServiceTimes -[hidden]right- UC_Restore

    ' Align rows vertically by columns (first five positions)
    UC_Load -[hidden]down- UC_SetCouriers
    UC_Receive -[hidden]down- UC_SelectCourier
    UC_Compute -[hidden]down- UC_Pickup_Delivery
    UC_addDeliveryManual -[hidden]down- UC_ServiceTimes
    UC_DisplayTour -[hidden]down- UC_Restore
}

' Actor → Use cases
Dispatcher -[#blue]-> UC_Load
Dispatcher -[#blue]-> UC_SetCouriers
Dispatcher -[#blue]-> UC_addDeliveryManual
Dispatcher -[#blue]-> UC_Receive
Dispatcher -[#blue]-> UC_Save
Dispatcher -[#blue]-> UC_Restore
Dispatcher -[#blue]-> UC_Compute

Courier -[#green]-> UC_DisplayTour

' Includes (decomposition) — arrow head points to the included UC
UC_addDeliveryManual .> UC_ServiceTimes : <<include>>
UC_addDeliveryManual .> UC_SelectCourier : <<include>>
UC_addDeliveryManual .> UC_Pickup_Delivery : <<include>>
UC_Receive .> UC_SelectCourier : <<include>>

' Notes / business rules
note right of UC_Compute
- Objective: minimize arrival time back at warehouse
- All tours start at 08:00 from the warehouse
- Constant travel speed: 15 km/h
- Respect pickup-before-delivery constraints
end note

note left of UC_Receive
A delivery request is send by the customer.
end note


@enduml
